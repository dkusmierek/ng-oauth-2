var ngOAuth2=angular.module("ngOAuth2",[]);ngOAuth2.provider("OAuth2",function(){var e={baseUrl:null,grantPath:null,refreshPath:null,revokePath:null,clientId:null,clientSecret:null,grantType:"password"};this.setBaseUrl=function(t){e.baseUrl=t},this.setGrantPath=function(t){e.grantPath=t},this.setRefreshPath=function(t){e.refreshPath=t},this.setRevokePath=function(t){e.revokePath=t},this.setClientId=function(t){e.clientId=t},this.setClientId=function(t){e.clientId=t},this.setClientSecret=function(t){e.clientSecret=t},this.setGrantType=function(t){e.grantType=t},this.$get=["$http","QueryStringService","OAuthSessionService",function(t,n,r){function i(i,c){return t.post(e.baseUrl+e.grantPath,n.encode({client_id:e.clientId,client_secret:e.clientSecret,grant_type:e.grantType,username:i,password:c})).success(function(e,t){200===t&&r.create(e)})}function c(){var i=r.get();return t.post(e.baseUrl+e.revokePath,n.encode({client_id:e.clientId,client_secret:e.clientSecret,token:i.access_token})).success(function(e,t){200===t&&r.clear()})}function s(){var i=r.get();return t.post(e.baseUrl+e.grantPath,n.encode({client_id:e.clientId,client_secret:e.clientSecret,grant_type:"refresh_token",refresh_token:i.refresh_token})).success(function(e,t){200===t&&r.create(e)})}function o(){return e}return{authenticate:i,refreshToken:s,revokeToken:c,getConfig:o}}]}),ngOAuth2.service("QueryStringService",function(){this.encode=function(e){if(void 0===e||e==={}||null===e)return!1;var t="";return angular.forEach(e,function(e,n){t+=n+"="+e+"&"}),t.substring(0,t.length-1)},this.decode=function(e){if(null==e||!e.length)return!1;var t=e.split("&"),n={};return angular.forEach(t,function(e){var t=e.split("=");n[t[0]]=t[1]}),n}}),ngOAuth2.factory("OAuthSessionService",function(){function e(e){return null!=e&&void sessionStorage.setItem("oauth_session",JSON.stringify(e))}function t(){return JSON.parse(sessionStorage.getItem("oauth_session"))||void 0}function n(){sessionStorage.clear()}return{create:e,get:t,clear:n}});